### どうリバースするか問題
### ジャローダどうするか問題
### 多種多様な攻撃どう実現するか問題

### online play めっちゃむずい問題

#### 梗概
Web知識

#### 問題の原因
gameモジュールはawaitableじゃない一方で、入出力を求めている
  -> fastapiと相性が悪すぎる

#### 問題の解決方法
1. gameモジュールをすべてawaitableにする。これが一番いい解決方法であると思ったが、作業量が多いわりに対して得られるものが少ないと思ったため、**非採用**。
2. なんとか同期モジュールを実行する。

    まずasyncioのevent_loop内でゲームモジュールを実行するわけにはいかなかった。
    > gameモジュールは非同期なので、event loopを入力が得られるまでブロックする。一方で、ユーザーの入力を得るためには、await receive_json()に実行が移る必要がある。
    ここでawaitableなreceive_json()は同期関数の中で実行できないので、event loopにreceive_jsonを登録する形で実行することになる。しかし、event_loopはロックされているので、この処理が終了することはない。

    そこで、threadingによってこれを達成する。
    > asyncio.run_in_executor(exec, func)によってthread(もしくはprocess)を新たに作ってそこで実行する。そしてユーザー入力はawaitableで実装されているので、event loopをインスタンス変数として保持しておいて、そこに登録する形で、実行することができる。

    これの実装に大きく手を焼いた。原因として、
    asyncioを雰囲気で理解していたためなのが一番大きい。そして次にdebugの仕方がよくわかっていなかったこと。今まですべて同期関数でtestやdebugを行っていたので、非同期になったとたん大きく変わったのもしんどかった。
